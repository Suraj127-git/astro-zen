---
import { SITE_CONTENT } from "@config";
import Hero from "@components/Hero.astro";
import Layout from "@layouts/Layout.astro";
import Experience from "@components/Experience.astro";
import Blog from "@components/Blog.astro";
import Project from "@components/Project.astro";
import About from "@components/About.astro";
---

<Layout>
  <div class="scroll-container">
    <section class="section" data-animation="fade-up">
      <Hero {...SITE_CONTENT.hero} />
    </section>
    
    <section class="section" data-animation="fade-up">
      <Experience experience={SITE_CONTENT.experience} />
    </section>
    
    <section class="section" data-animation="fade-up">
      <Blog blog={SITE_CONTENT.blog} />
    </section>
    
    <section class="section" data-animation="fade-up">
      <Project projects={SITE_CONTENT.projects} />
    </section>
    
    <section class="section" data-animation="fade-up">
      <About {...SITE_CONTENT.about} name={SITE_CONTENT.hero.name} />
    </section>
  </div>
</Layout>

<script>
  import gsap from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  // Animate sections on scroll
  const sections = document.querySelectorAll('.section');

  sections.forEach((section) => {
    gsap.from(section, {
      opacity: 0,
      y: 50,
      duration: 1,
      ease: 'power3.out',
      scrollTrigger: {
        trigger: section,
        start: 'top 80%',
        end: 'top 20%',
        toggleActions: 'play none none reverse',
      }
    });
  });

  // Hero section special animation
  gsap.from('.hero-content', {
    opacity: 0,
    y: 100,
    duration: 1.5,
    ease: 'power4.out',
  });

  // Stagger animation for experience items
  gsap.from('.experience-item', {
    opacity: 0,
    x: -50,
    stagger: 0.2,
    duration: 0.8,
    scrollTrigger: {
      trigger: '.experience-section',
      start: 'top 70%',
    }
  });

  // Project cards animation
  gsap.from('.project-card', {
    opacity: 0,
    scale: 0.8,
    stagger: 0.2,
    duration: 0.8,
    scrollTrigger: {
      trigger: '.project-section',
      start: 'top 60%',
    }
  });

  // Blog posts animation
  gsap.from('.blog-post', {
    opacity: 0,
    y: 100,
    stagger: 0.3,
    duration: 1,
    scrollTrigger: {
      trigger: '.blog-section',
      start: 'top 70%',
    }
  });

  // About section animation
  gsap.from('.about-content', {
    opacity: 0,
    scale: 0.9,
    duration: 1,
    scrollTrigger: {
      trigger: '.about-section',
      start: 'top 75%',
    }
  });
</script>

<style>
  .scroll-container {
    overflow-x: hidden;
  }

  .section {
    opacity: 0;
  }
</style>
