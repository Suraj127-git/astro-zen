---
import { SITE_CONTENT } from "@config";
import Hero from "@components/Hero.astro";
import Layout from "@layouts/Layout.astro";
import Experience from "@components/Experience.astro";
import Blog from "@components/Blog.astro";
import Project from "@components/Project.astro";
import About from "@components/About.astro";
---

<Layout>
  <Hero {...SITE_CONTENT.hero} />
  <Experience experience={SITE_CONTENT.experience} />
  <Blog blog={SITE_CONTENT.blog} />
  <Project projects={SITE_CONTENT.projects} />
  <About {...SITE_CONTENT.about} name={SITE_CONTENT.hero.name} />
</Layout>

<script>
  async function initAnimations() {
    try {
      const gsap = (await import('gsap')).default;
      const ScrollTrigger = (await import('gsap/ScrollTrigger')).default;
      
      gsap.registerPlugin(ScrollTrigger);

      // Hero section animation
      const heroTitle = document.querySelector('#hero h1');
      const heroParagraphs = document.querySelectorAll('#hero p');
      
      if (heroTitle) {
        gsap.from(heroTitle, {
          y: 50,
          opacity: 0,
          duration: 1,
          ease: 'power3.out'
        });
      }

      if (heroParagraphs.length) {
        gsap.from(heroParagraphs, {
          y: 30,
          opacity: 0,
          duration: 1,
          stagger: 0.2,
          ease: 'power3.out'
        });
      }

      // Experience section animation
      const experienceItems = document.querySelectorAll('#experience .mb-10');
      if (experienceItems.length) {
        gsap.from(experienceItems, {
          y: 30,
          opacity: 0,
          stagger: 0.15,
          duration: 0.8,
          scrollTrigger: {
            trigger: '#experience',
            start: 'top 80%',
          }
        });
      }

      // Blog section animation
      const blogItems = document.querySelectorAll('#blog .sticky');
      if (blogItems.length) {
        gsap.from(blogItems, {
          y: 50,
          opacity: 0,
          stagger: 0.2,
          duration: 1,
          scrollTrigger: {
            trigger: '#blog',
            start: 'top 75%',
          }
        });
      }

      // Project section animation
      const projectItems = document.querySelectorAll('#projects .rounded-2xl');
      if (projectItems.length) {
        gsap.from(projectItems, {
          scale: 0.9,
          opacity: 0,
          stagger: 0.2,
          duration: 0.8,
          scrollTrigger: {
            trigger: '#projects',
            start: 'top 75%',
          }
        });
      }

      // About section animation
      const aboutSection = document.querySelector('#about .flex');
      if (aboutSection) {
        gsap.from(aboutSection, {
          opacity: 0,
          y: 30,
          duration: 1,
          scrollTrigger: {
            trigger: '#about',
            start: 'top 75%',
          }
        });
      }
    } catch (error) {
      console.error('Error in animations:', error);
    }
  }

  // Initialize animations when the DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    initAnimations();
  });
</script>
